---
title: 超絶簡単！Clovaスキル開発
tags:
  - LINE
  - Clova
private: false
updated_at: '2019-07-17T22:59:24+09:00'
id: 67e90f46aae2782932f9
organization_url_name: null
slide: true
ignorePublish: false
---
## はじめに
[少し前の記事](https://qiita.com/ufoo68/items/f0ba45347b226c8afcd8)のClovaスキルバージョンです。
使う言語やデプロイ環境は特に変更ありません。

---

## Clovaとは
[こちら](https://clova.line.me/)が公式サイトです。要はLINEが開発したスマートスピーカーに搭載されているAIアシスタントです。
Clovaには予め色々な機能が入っていますが、追加で追加で機能を搭載させることができます。その追加できる機能を**スキル**と呼び、私達も実際に開発することができます。

---

## Clovaスキルをつくるには
まずは[ここ](https://clova-developers.line.biz/#/)にアカウントを登録する必要があります。ここのデベロッパーサイトを使ってClovaのスキルを登録することができます。
また、開発したスキルが使える範囲は以下の２パターンになります。

- **所定の審査**を通過して公開することで一般ユーザーも使える
- 開発モードのまま自分のLINEアカウントに連携したClovaだけがスキルを使える


---

# スキルを作ってみよう

---

## まずはスキル設定
@sumihiro3さんの[この記事](https://qiita.com/sumihiro3/items/3ca0a2f849a116b509ff)がかなり丁寧に解説してくださってます。設定そのものは難しくないので特にこちらで別途解説する必要はないと思いますが、以下の２つについてはスマートスピーカー開発特有の要素なので次に解説します。

- インテント
- スロット 

---

## インテント
インテントはスキルの対話モデルを各意図ごとにClovaがカテゴライズするものです。
例えば食べ物か飲み物を注文する対話モデルを考えた時に**orderFood**と**orderDrink**という２つのインテントを定義したとします。
![インテント (1).jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/209689/55003fe5-edda-8c2f-b9a8-4aab00e7c5ca.jpeg)
ここではまだ具体的な注文内容は定義しません。

---

## スロット
インテントをClovaが受け取ったら今度は注文したいものは何かを確認します。この**注文したいもの**がここではスロットとして定義されています。例として**orderFood**に**food**というスロットを定義します。
![スロット.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/209689/ddc4146f-5c6f-9885-b873-c24ba46b5dbf.jpeg)
このスロットの中に食べ物の名前を定義していきます。つまり、Clovaは**定義したインテントとスロット以外を処理することはできません。**

---

## スロットとインテントを繋げる

インテントの中にサンプル発話リストを設定することでClovaが認識すべき発話を定義します。例として赤字になっている単語をスロットとして登録します。
![サンプル発話.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/209689/133e65cf-71ca-0297-f401-65f90e91f9aa.jpeg)
サンプル発話リストに含まれているフレーズをClovaが認識すれば**orderFood**インテントを受け取ることができます。

---

## 実装してみよう
以前に書いた記事が２つあります。具体的な実装の参考にしてみてください。

- [Clovaで「抵抗値換算」のスキルを作ってみる](https://qiita.com/ufoo68/items/f6b04e1ca89a931ca206)
- [Clovaで「日本酒診断」のスキルを作ってみる](https://qiita.com/ufoo68/items/0df3e1c3c9beb4d4faf8)

---

# スキルを公開してみよう

---

## 審査の注意点

- 代表サンプル発話
- 音声の揺らぎの対応
- 想定しない発話の考慮

---

## 代表サンプル発話

１つ目には必ず「ねぇClova、」をつける。これの「ぇ」が「え」になっただけでもリジェクトされるので正確に登録しましょう。サポートされている発話は以下です。

- ねぇClova、**を起動して
- ねぇClova、**を開いて
- ねぇClova、**に繋いで

---

## 音声の揺らぎの対応

Clovaはユーザーの発話内容を漢字入りの言葉として認識します。例えば「カレー」という言葉も発音の違いによって魚の「鰈」や全く違った言葉の「加齢」と誤認識してしまう場合もあります。こういった誤認識にも対応するために事前に**いくつかの同義語をスロットに定義**しておきます。
この音声認識の評価をしたい場合は、「対話モデルを編集」を開くと左下に「ダッシュボード」と「発話履歴」を切り替えるメニューがあります。音声認識には自分のアカウントで登録したClovaを使ってできます。

---

## 想定しない発話の考慮

想定していたストーリー内容とは異なった発話をユーザーがしてしまう場合もあります（例えば「はい」か「いいえ」しか用意していない質問に「どちらでもない」とい答えが来た時など）。この場合２つの対処方法があげられると思います。

1. 想定しない発話にも対応できるシステムに強化する
2. 最初もしくは途中の言葉の誘導でそういった発話をさせない

技術的には1が難しくなりますが、審査を通過するだけが目的の場合は2の方法でも問題ありません。

---

## 参考になる記事

@h-takaumaさんの[記事](https://qiita.com/h-takauma/items/3147b5df2b50f3858a26)も見てもらうととても参考になると思います。

---

# 最後に

---

## 人気の出るスキルを作る方法

私もよくわかりませんが、前に参加した[勉強会のまとめ](https://qiita.com/ufoo68/items/a0043262ea0078fefd19)を参照すると何か良い知見が得られるかもしれません（多分）。。。




